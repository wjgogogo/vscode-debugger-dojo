use rust_demo::math;

fn main() {
    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œè§‚å¯Ÿç¨‹åºå¼€å§‹æ‰§è¡Œ
    println!("ðŸ¦€ Rust CodeLLDB è°ƒè¯•ç¤ºä¾‹\n");

    // åŸºç¡€ç±»åž‹è°ƒè¯•
    let x = 42;
    let y = 3.14;
    let name = "Rust";
    let is_awesome = true;

    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹å˜é‡å€¼
    println!("æ•´æ•°: {}", x);
    println!("æµ®ç‚¹æ•°: {}", y);
    println!("å­—ç¬¦ä¸²: {}", name);
    println!("å¸ƒå°”å€¼: {}", is_awesome);

    // æ•°ç»„å’Œåˆ‡ç‰‡
    let arr = [1, 2, 3, 4, 5];
    let slice = &arr[1..4];

    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹æ•°ç»„å’Œåˆ‡ç‰‡
    println!("\næ•°ç»„: {:?}", arr);
    println!("åˆ‡ç‰‡: {:?}", slice);

    // å…ƒç»„
    let tuple = (1, "hello", 3.14);

    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹å…ƒç»„
    println!("\nå…ƒç»„: {:?}", tuple);
    println!("å…ƒç»„ç¬¬ä¸€ä¸ªå…ƒç´ : {}", tuple.0);

    // å­—ç¬¦ä¸²æ“ä½œ
    let s1 = String::from("Hello");
    let s2 = String::from("World");
    let s3 = format!("{} {}", s1, s2);

    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹å­—ç¬¦ä¸²
    println!("\nå­—ç¬¦ä¸²æ‹¼æŽ¥: {}", s3);

    // Vector
    let mut vec = Vec::new();
    vec.push(1);
    vec.push(2);
    vec.push(3);

    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹ Vec å†…å®¹
    println!("\nVector: {:?}", vec);

    // å¾ªçŽ¯
    println!("\nå¾ªçŽ¯è¾“å‡º:");
    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œè§‚å¯Ÿå¾ªçŽ¯æ‰§è¡Œ
    for i in 1..=5 {
        println!("  i = {}", i);
    }

    // å‡½æ•°è°ƒç”¨
    println!("\nå‡½æ•°è°ƒç”¨:");

    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œå•æ­¥è¿›å…¥å‡½æ•°
    let result = add(10, 20);
    println!("10 + 20 = {}", result);

    // é€’å½’è°ƒç”¨
    println!("\né€’å½’è°ƒç”¨:");
    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œè§‚å¯Ÿé€’å½’
    let fact = math::factorial(5);
    println!("5! = {}", fact);

    // è´¨æ•°åˆ¤æ–­
    println!("\nè´¨æ•°åˆ¤æ–­:");
    let primes = [2, 3, 5, 7, 11, 13];
    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œè§‚å¯Ÿæ•°ç»„éåŽ†
    for n in primes {
        let is_p = math::is_prime(n);
        println!("  {} æ˜¯è´¨æ•°: {}", n, is_p);
    }

    println!("\nâœ¨ ç¨‹åºæ‰§è¡Œå®Œæˆ");
}

/// ç®€å•çš„åŠ æ³•å‡½æ•°
/// åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼Œè§‚å¯Ÿå‡½æ•°å‚æ•°
fn add(a: i32, b: i32) -> i32 {
    println!("  add({}, {})", a, b);
    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹è¿”å›žå€¼
    a + b
}
